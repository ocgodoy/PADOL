[{"C:\\Users\\axelj\\Documents\\Cours\\3_eme_annee\\Projet_S9\\main\\PADOL\\client\\src\\index.js":"1","C:\\Users\\axelj\\Documents\\Cours\\3_eme_annee\\Projet_S9\\main\\PADOL\\client\\src\\App.js":"2","C:\\Users\\axelj\\Documents\\Cours\\3_eme_annee\\Projet_S9\\main\\PADOL\\client\\src\\MainRouter.js":"3","C:\\Users\\axelj\\Documents\\Cours\\3_eme_annee\\Projet_S9\\main\\PADOL\\client\\src\\core\\Menu.js":"4","C:\\Users\\axelj\\Documents\\Cours\\3_eme_annee\\Projet_S9\\main\\PADOL\\client\\src\\core\\Home.js":"5","C:\\Users\\axelj\\Documents\\Cours\\3_eme_annee\\Projet_S9\\main\\PADOL\\client\\src\\user\\Signup.js":"6","C:\\Users\\axelj\\Documents\\Cours\\3_eme_annee\\Projet_S9\\main\\PADOL\\client\\src\\user\\Signin.js":"7","C:\\Users\\axelj\\Documents\\Cours\\3_eme_annee\\Projet_S9\\main\\PADOL\\client\\src\\user\\Profile.js":"8","C:\\Users\\axelj\\Documents\\Cours\\3_eme_annee\\Projet_S9\\main\\PADOL\\client\\src\\user\\Users.js":"9","C:\\Users\\axelj\\Documents\\Cours\\3_eme_annee\\Projet_S9\\main\\PADOL\\client\\src\\user\\FindPeople.js":"10","C:\\Users\\axelj\\Documents\\Cours\\3_eme_annee\\Projet_S9\\main\\PADOL\\client\\src\\user\\EditProfile.js":"11","C:\\Users\\axelj\\Documents\\Cours\\3_eme_annee\\Projet_S9\\main\\PADOL\\client\\src\\auth\\PrivateRoute.js":"12","C:\\Users\\axelj\\Documents\\Cours\\3_eme_annee\\Projet_S9\\main\\PADOL\\client\\src\\post\\SinglePost.js":"13","C:\\Users\\axelj\\Documents\\Cours\\3_eme_annee\\Projet_S9\\main\\PADOL\\client\\src\\post\\NewPost.js":"14","C:\\Users\\axelj\\Documents\\Cours\\3_eme_annee\\Projet_S9\\main\\PADOL\\client\\src\\post\\EditPost.js":"15","C:\\Users\\axelj\\Documents\\Cours\\3_eme_annee\\Projet_S9\\main\\PADOL\\client\\src\\post\\ExpiredPost.js":"16","C:\\Users\\axelj\\Documents\\Cours\\3_eme_annee\\Projet_S9\\main\\PADOL\\client\\src\\auth\\index.js":"17","C:\\Users\\axelj\\Documents\\Cours\\3_eme_annee\\Projet_S9\\main\\PADOL\\client\\src\\post\\Posts.js":"18","C:\\Users\\axelj\\Documents\\Cours\\3_eme_annee\\Projet_S9\\main\\PADOL\\client\\src\\user\\FollowProfileButton.js":"19","C:\\Users\\axelj\\Documents\\Cours\\3_eme_annee\\Projet_S9\\main\\PADOL\\client\\src\\user\\apiUser.js":"20","C:\\Users\\axelj\\Documents\\Cours\\3_eme_annee\\Projet_S9\\main\\PADOL\\client\\src\\user\\ProfileTabs.js":"21","C:\\Users\\axelj\\Documents\\Cours\\3_eme_annee\\Projet_S9\\main\\PADOL\\client\\src\\user\\DeleteProfile.js":"22","C:\\Users\\axelj\\Documents\\Cours\\3_eme_annee\\Projet_S9\\main\\PADOL\\client\\src\\post\\apiPost.js":"23","C:\\Users\\axelj\\Documents\\Cours\\3_eme_annee\\Projet_S9\\main\\PADOL\\client\\src\\post\\Comment.js":"24","C:\\Users\\axelj\\Documents\\Cours\\3_eme_annee\\Projet_S9\\main\\PADOL\\client\\src\\post\\DeletePost.js":"25","C:\\Users\\axelj\\Documents\\Cours\\3_eme_annee\\Projet_S9\\main\\PADOL\\client\\src\\post\\DeleteComment.js":"26","C:\\Users\\axelj\\Documents\\Cours\\3_eme_annee\\Projet_S9\\main\\PADOL\\client\\src\\friend\\Friends.js":"27","C:\\Users\\axelj\\Documents\\Cours\\3_eme_annee\\Projet_S9\\main\\PADOL\\client\\src\\friend\\apiFriend.js":"28"},{"size":147,"mtime":1610634083392,"results":"29","hashOfConfig":"30"},{"size":223,"mtime":1610634083381,"results":"31","hashOfConfig":"30"},{"size":1614,"mtime":1610634523079,"results":"32","hashOfConfig":"30"},{"size":3045,"mtime":1610634523080,"results":"33","hashOfConfig":"30"},{"size":309,"mtime":1610634083384,"results":"34","hashOfConfig":"30"},{"size":3388,"mtime":1610634083401,"results":"35","hashOfConfig":"30"},{"size":2278,"mtime":1610634083400,"results":"36","hashOfConfig":"30"},{"size":3912,"mtime":1610634523085,"results":"37","hashOfConfig":"30"},{"size":1572,"mtime":1610634083401,"results":"38","hashOfConfig":"30"},{"size":3138,"mtime":1610634523083,"results":"39","hashOfConfig":"30"},{"size":4802,"mtime":1610634083397,"results":"40","hashOfConfig":"30"},{"size":470,"mtime":1610634083383,"results":"41","hashOfConfig":"30"},{"size":6545,"mtime":1610634189611,"results":"42","hashOfConfig":"30"},{"size":4641,"mtime":1610634189609,"results":"43","hashOfConfig":"30"},{"size":4627,"mtime":1610634189609,"results":"44","hashOfConfig":"30"},{"size":1456,"mtime":1610634083395,"results":"45","hashOfConfig":"30"},{"size":1601,"mtime":1610634189605,"results":"46","hashOfConfig":"30"},{"size":3092,"mtime":1610634189610,"results":"47","hashOfConfig":"30"},{"size":4320,"mtime":1610634523084,"results":"48","hashOfConfig":"30"},{"size":2536,"mtime":1610634083402,"results":"49","hashOfConfig":"30"},{"size":3149,"mtime":1610634083400,"results":"50","hashOfConfig":"30"},{"size":1058,"mtime":1610634083397,"results":"51","hashOfConfig":"30"},{"size":4908,"mtime":1610634189612,"results":"52","hashOfConfig":"30"},{"size":4330,"mtime":1610634189606,"results":"53","hashOfConfig":"30"},{"size":949,"mtime":1610634189608,"results":"54","hashOfConfig":"30"},{"size":1208,"mtime":1610634189607,"results":"55","hashOfConfig":"30"},{"size":4313,"mtime":1610634523081,"results":"56","hashOfConfig":"30"},{"size":2021,"mtime":1610634523081,"results":"57","hashOfConfig":"30"},{"filePath":"58","messages":"59","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},"gf2ea9",{"filePath":"61","messages":"62","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"63","messages":"64","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"65","messages":"66","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"67","usedDeprecatedRules":"60"},{"filePath":"68","messages":"69","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"70","messages":"71","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"72","messages":"73","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"74","messages":"75","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"76","messages":"77","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"78","messages":"79","errorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"80","usedDeprecatedRules":"60"},{"filePath":"81","messages":"82","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"83","usedDeprecatedRules":"60"},{"filePath":"84","messages":"85","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"86","usedDeprecatedRules":"60"},{"filePath":"87","messages":"88","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"89","usedDeprecatedRules":"60"},{"filePath":"90","messages":"91","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"92","messages":"93","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"94","messages":"95","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"96","usedDeprecatedRules":"60"},{"filePath":"97","messages":"98","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"99","usedDeprecatedRules":"60"},{"filePath":"100","messages":"101","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"102","usedDeprecatedRules":"60"},{"filePath":"103","messages":"104","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"105","usedDeprecatedRules":"60"},{"filePath":"106","messages":"107","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"108","messages":"109","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"110","messages":"111","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"112","messages":"113","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"114","usedDeprecatedRules":"60"},{"filePath":"115","messages":"116","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"117","messages":"118","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"119","messages":"120","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"121","messages":"122","errorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"123","usedDeprecatedRules":"60"},{"filePath":"124","messages":"125","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},"C:\\Users\\axelj\\Documents\\Cours\\3_eme_annee\\Projet_S9\\main\\PADOL\\client\\src\\index.js",[],["126","127"],"C:\\Users\\axelj\\Documents\\Cours\\3_eme_annee\\Projet_S9\\main\\PADOL\\client\\src\\App.js",[],"C:\\Users\\axelj\\Documents\\Cours\\3_eme_annee\\Projet_S9\\main\\PADOL\\client\\src\\MainRouter.js",[],"C:\\Users\\axelj\\Documents\\Cours\\3_eme_annee\\Projet_S9\\main\\PADOL\\client\\src\\core\\Menu.js",["128"],"import React from 'react'\r\nimport { Link, withRouter } from 'react-router-dom'\r\nimport { signout, isAuthenticate, isActive } from '../auth/index'\r\n\r\nconst Menu = ({ history }) => (\r\n  <div>\r\n    <ul className='nav nav-tabs bg-primary'>\r\n      <li className='nav-item'>\r\n        <Link className='nav-link' style={isActive(history, '/')} to='/'>\r\n          Home\r\n        </Link>\r\n      </li>\r\n      <li className='nav-item'>\r\n        <Link\r\n          className='nav-link'\r\n          style={isActive(history, '/users')}\r\n          to='/users'\r\n        >\r\n          Users\r\n        </Link>\r\n      </li>\r\n      {!isAuthenticate() ? (\r\n        <>\r\n          <li className='nav-item'>\r\n            <Link\r\n              className='nav-link'\r\n              style={isActive(history, '/signup')}\r\n              to='/signup'\r\n            >\r\n              Sign Up\r\n            </Link>\r\n          </li>\r\n          <li className='nav-item'>\r\n            <Link\r\n              className='nav-link'\r\n              style={isActive(history, '/signin')}\r\n              to='/signin'\r\n            >\r\n              Sign In\r\n            </Link>\r\n          </li>\r\n        </>\r\n      ) : (\r\n        ''\r\n      )}\r\n\r\n      {isAuthenticate() ? (\r\n        <>\r\n          <li className='nav-item'>\r\n            <Link\r\n              className='nav-link'\r\n              style={isActive(history, `/user/${isAuthenticate().user._id}`)}\r\n              to={`/user/${isAuthenticate().user._id}`}\r\n            >\r\n              {isAuthenticate().user.pseudo}'s profile\r\n            </Link>\r\n          </li>\r\n          <li className='nav-item'>\r\n            <Link\r\n              className='nav-link'\r\n              style={isActive(\r\n                history,\r\n                `/user/findpeople/${isAuthenticate().user._id}`\r\n              )}\r\n              to={`/user/findpeople/${isAuthenticate().user._id}`}\r\n            >\r\n              Find People\r\n            </Link>\r\n          </li>\r\n          <li className='nav-item'>\r\n            <Link\r\n              className='nav-link'\r\n              style={isActive(history, '/post/new')}\r\n              to='/post/new'\r\n            >\r\n              Create Post\r\n            </Link>\r\n          </li>\r\n          <li className='nav-item'>\r\n            <Link\r\n              className='nav-link'\r\n              style={isActive(\r\n                history,\r\n                `/friends/all/${isAuthenticate().user._id}`\r\n              )}\r\n              to={`/friends/all/${isAuthenticate().user._id}`}\r\n            >\r\n              Friends\r\n            </Link>\r\n          </li>\r\n          <li className='nav-item'>\r\n            <a\r\n              className='nav-link'\r\n              style={isActive(history, '/signout', {\r\n                cursor: 'pointer',\r\n                color: '#fff'\r\n              })}\r\n              onClick={() => signout(() => history.push('/'))}\r\n            >\r\n              Sign Out\r\n            </a>\r\n          </li>\r\n        </>\r\n      ) : (\r\n        ''\r\n      )}\r\n    </ul>\r\n  </div>\r\n)\r\n\r\nexport default withRouter(Menu)\r\n","C:\\Users\\axelj\\Documents\\Cours\\3_eme_annee\\Projet_S9\\main\\PADOL\\client\\src\\core\\Home.js",[],"C:\\Users\\axelj\\Documents\\Cours\\3_eme_annee\\Projet_S9\\main\\PADOL\\client\\src\\user\\Signup.js",[],"C:\\Users\\axelj\\Documents\\Cours\\3_eme_annee\\Projet_S9\\main\\PADOL\\client\\src\\user\\Signin.js",[],"C:\\Users\\axelj\\Documents\\Cours\\3_eme_annee\\Projet_S9\\main\\PADOL\\client\\src\\user\\Profile.js",[],"C:\\Users\\axelj\\Documents\\Cours\\3_eme_annee\\Projet_S9\\main\\PADOL\\client\\src\\user\\Users.js",[],"C:\\Users\\axelj\\Documents\\Cours\\3_eme_annee\\Projet_S9\\main\\PADOL\\client\\src\\user\\FindPeople.js",["129","130","131","132","133","134","135","136"],"import React, { Component } from 'react';\r\nimport { findPeople, getAllUser} from './apiUser';\r\nimport DefaultProfile from '../images/avatar.png';\r\nimport { isAuthenticate } from '../auth';\r\nimport { ReactSearchAutocomplete } from 'react-search-autocomplete'\r\nimport { Redirect } from 'react-router-dom';\r\nimport { AiFillMail } from 'react-icons/ai';\r\nimport { FaUserCircle } from 'react-icons/fa';\r\n\r\nclass Users extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      users: [],\r\n      error: '',\r\n      pseudoTable: [],\r\n      emailTable: [],\r\n      researchType: \"pseudo\",\r\n      redirect: false,\r\n      id_redirect: undefined\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    const userId = isAuthenticate().user._id;\r\n    const token = isAuthenticate().token;\r\n    var pseudoTable = [];\r\n    var emailTable = [];\r\n    getAllUser().then(users => (users.forEach((user) => {\r\n      pseudoTable.push({id: user._id, name: user.about.pseudo});\r\n      emailTable.push({id: user._id, name: user.auth.email})\r\n    }),\r\n    this.setState({pseudoTable: pseudoTable}),\r\n    this.setState({emailTable: emailTable})\r\n\r\n    ))\r\n\r\n\r\n  }\r\n\r\n  setSearchToEmail = e => {\r\n    e.preventDefault();\r\n    this.setState({researchType: \"email\"})\r\n  };\r\n\r\n  setSearchToPseudo = e => {\r\n    e.preventDefault();\r\n    this.setState({researchType: \"pseudo\"})\r\n  };\r\n\r\n  render() {\r\n\r\n  const {pseudoTable, emailTable}= this.state\r\n  console.log(\"users vaut \" + JSON.stringify(pseudoTable))\r\n  const handleOnSearch = (string, cached) => {\r\n    // onSearch returns the string searched and if\r\n    // the values are cached. If the values are cached\r\n    // \"cached\" contains the cached values, if not, returns false\r\n    console.log(string, cached)\r\n  }\r\n\r\n  const handleOnSelect = (item) => {\r\n    // the item selected\r\n    console.log(item)\r\n    this.setState({id_redirect: item.id})\r\n    this.setState({redirect: true})\r\n  }\r\n\r\n  const handleOnFocus = () => {\r\n    console.log('Focused')\r\n  }\r\n\r\n    const {open, followMessage, redirect, id_redirect, researchType } = this.state;\r\n    if (researchType === \"pseudo\") var users = pseudoTable\r\n    if (researchType === \"email\") var users = emailTable\r\n    if (redirect) return <Redirect to={`/user/${id_redirect}`} />;\r\n    return (\r\n      <div>\r\n          <div className='jumbotron'>\r\n            <h2 className='mt-5 mb-5'>Find your friends</h2>\r\n          </div>\r\n          <div>\r\n          <button className='btn btn-raised btn-primary' onClick= {this.setSearchToPseudo}>\r\n          <FaUserCircle />\r\n          </button>\r\n          <button className='btn btn-raised btn-primary' onClick= {this.setSearchToEmail}>\r\n          <AiFillMail />\r\n          </button>\r\n          </div>\r\n          <div className='container'>\r\n            <div style={{ width: 400 }}>\r\n              <ReactSearchAutocomplete\r\n                items={users}\r\n                onSearch={handleOnSearch}\r\n                onSelect={handleOnSelect}\r\n                onFocus={handleOnFocus}\r\n                autoFocus\r\n              />\r\n            </div>\r\n\r\n      </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Users;\r\n","C:\\Users\\axelj\\Documents\\Cours\\3_eme_annee\\Projet_S9\\main\\PADOL\\client\\src\\user\\EditProfile.js",["137","138","139","140","141"],"import React, { Component } from 'react';\r\nimport { getUser, update, updateLocalStorage } from './apiUser';\r\nimport { isAuthenticate } from '../auth';\r\nimport { Redirect } from 'react-router-dom';\r\nimport DefaultAvatar from '../images/avatar.png';\r\n\r\nclass EditProfile extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      id: '',\r\n      email: '',\r\n      name: '',\r\n      password: '',\r\n      redirectToProfile: false,\r\n      error: '',\r\n      loading: false,\r\n      fileSize: 0\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.userData = new FormData();\r\n    const userId = this.props.match.params.userId;\r\n    const token = isAuthenticate().token;\r\n    getUser(userId, token).then(data => {\r\n      if (!data || data.err) console.log(data.err);\r\n      else {\r\n        this.setState({ id: data._id, email: data.email, name: data.name });\r\n      }\r\n    });\r\n  }\r\n\r\n  handleChange = name => e => {\r\n    let value = name === 'photo' ? e.target.files[0] : e.target.value;\r\n    let fileSize = name === 'photo' ? e.target.files[0].size : 0;\r\n    this.userData.set(name, value);\r\n    this.setState({ [name]: value, error: '', fileSize });\r\n  };\r\n\r\n  clickSubmit = e => {\r\n    e.preventDefault();\r\n    if (this.isValid()) {\r\n      this.setState({ loading: true });\r\n      const { id, name, email, password } = this.state;\r\n      // const user = { name, email, password: password || undefined }\r\n      const token = isAuthenticate().token;\r\n      update(id, token, this.userData).then(res => {\r\n        if (res.err) console.log(res.err);\r\n        else {\r\n          updateLocalStorage(res, () => {\r\n            this.setState({\r\n              redirectToProfile: true\r\n            });\r\n          });\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  isValid = () => {\r\n    const { name, email, password, fileSize } = this.state;\r\n    const reg = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n    if (fileSize > 300000) {\r\n      this.setState({ error: 'File size should be less than 300kb ' });\r\n      return false;\r\n    } else if (name.length === 0) {\r\n      this.setState({ error: 'Name is required' });\r\n      return false;\r\n    } else if (!reg.test(email.toLowerCase())) {\r\n      this.setState({ error: 'A valid Email is required' });\r\n      return false;\r\n    } else if (password.length > 0 && password.length < 6) {\r\n      this.setState({ error: 'Password must have at least 6 characters' });\r\n      return false;\r\n    }\r\n    return true;\r\n  };\r\n\r\n  signUpForm = (name, email, password) => (\r\n    <form>\r\n      <div className='form-group'>\r\n        <label className='text-muted'>Profile Photo</label>\r\n        <input\r\n          onChange={this.handleChange('photo')}\r\n          type='file'\r\n          accept='images/*'\r\n          className='form-control'\r\n        />\r\n      </div>\r\n      <div className='form-group'>\r\n        <input\r\n          onChange={this.handleChange('name')}\r\n          value={name}\r\n          type='text'\r\n          className='form-control'\r\n        />\r\n      </div>\r\n      <div className='form-group'>\r\n        <label className='text-muted'>Email</label>\r\n        <input\r\n          onChange={this.handleChange('email')}\r\n          value={email}\r\n          type='email'\r\n          className='form-control'\r\n        />\r\n      </div>\r\n      <div className='form-group'>\r\n        <label className='text-muted'>Password</label>\r\n        <input\r\n          onChange={this.handleChange('password')}\r\n          value={password}\r\n          type='password'\r\n          className='form-control'\r\n        />\r\n      </div>\r\n      <button onClick={this.clickSubmit} className='btn btn-raised btn-primary'>\r\n        Update\r\n      </button>\r\n    </form>\r\n  );\r\n\r\n  render() {\r\n    const {\r\n      name,\r\n      email,\r\n      password,\r\n      id,\r\n      redirectToProfile,\r\n      error,\r\n      loading\r\n    } = this.state;\r\n    if (redirectToProfile) return <Redirect to={`/user/${id}`} />;\r\n    return (\r\n      <div className='container'>\r\n        <h2 className='mt-5 mb-5'>Edit Profile</h2>\r\n        <div\r\n          className='alert alert-danger'\r\n          style={{ display: error ? '' : 'none' }}\r\n        >\r\n          {error}\r\n        </div>\r\n        {loading ? (\r\n          <div className='jumbotron text-center'>\r\n            <h2>Loading...</h2>\r\n          </div>\r\n        ) : (\r\n          ''\r\n        )}\r\n\r\n        <img\r\n          src={`${process.env.REACT_APP_API_URL}/user/photo/${id}`}\r\n          onError={i => (i.target.src = `${DefaultAvatar}`)}\r\n          style={{ width: '30%', height: '15vw', objectFit: 'cover' }}\r\n          alt={name}\r\n        />\r\n\r\n        {this.signUpForm(name, email, password)}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default EditProfile;\r\n","C:\\Users\\axelj\\Documents\\Cours\\3_eme_annee\\Projet_S9\\main\\PADOL\\client\\src\\auth\\PrivateRoute.js",["142"],"import React, { Component } from 'react'\r\nimport { isAuthenticate } from '.'\r\nimport { Route, Redirect } from 'react-router-dom'\r\n\r\nconst PrivateRoute = ({ componen: Component, ...rest }) => (\r\n  <Route\r\n    {...rest}\r\n    render={props =>\r\n      isAuthenticate() ? (\r\n        <Component {...props} />\r\n      ) : (\r\n        <Redirect\r\n          to={{ pathname: '/signin', state: { from: props.location } }}\r\n        />\r\n      )}\r\n  />\r\n)\r\n\r\nexport default PrivateRoute\r\n","C:\\Users\\axelj\\Documents\\Cours\\3_eme_annee\\Projet_S9\\main\\PADOL\\client\\src\\post\\SinglePost.js",["143","144"],"import React, { Component} from 'react';\r\nimport { isAuthenticate } from '../auth';\r\nimport DefaultAvatar from '../images/post.jpg';\r\nimport { getPost, likePost, getBase64Photo } from './apiPost';\r\nimport { Link, Redirect } from 'react-router-dom';\r\nimport DeletePost from './DeletePost';\r\nimport Comment from './Comment';\r\n\r\nclass SinglePost extends Component {\r\n  state = {\r\n    post: {},\r\n    postId:{},\r\n    postedBy: {},\r\n    B64photo:{},\r\n    date: null,\r\n    redirectToSignin: false,\r\n    like: {},\r\n    likes: 0,\r\n    likers: [],\r\n    error: undefined,\r\n    comments: []\r\n  };\r\n\r\n\r\n  /**********************************RECUPERATION DONNEE DE LA BDD*********************************/ \r\n  componentDidMount() {\r\n    if (!isAuthenticate()) return this.setState({ redirectToSignin: true });\r\n    const token = isAuthenticate().token;\r\n    const postId = this.props.match.params.postId;\r\n\r\n\r\n    getPost(postId, token).then(data => {\r\n      if (data.error) {\r\n        console.log(data.error);\r\n        this.setState({error: data.error})\r\n      }\r\n      else{\r\n          this.setState({\r\n            post: data.content,\r\n            postedBy: data.postedBy,\r\n            postId: data._id,\r\n            date: data.date,\r\n            views: data.views,\r\n            likes: data.likes.numberOfLikes, //nb de like\r\n            liker: data.likes.likers, //donnée Id des likers\r\n            like : this.checkLike(data), default: false, //verifie que la personne du like a déja liké\r\n            comments: data.comments\r\n          });\r\n        }\r\n    });\r\n\r\n\r\n    getBase64Photo(postId, token).then(B64photo => {\r\n      if (B64photo.error) console.log(B64photo.error);\r\n      else{\r\n          this.setState({\r\n            B64photo : B64photo,\r\n          });\r\n        }\r\n    });\r\n  }\r\n  /**********************************FIN DE RECUPERATION DONNEE DE LA BDD*********************************/ \r\n  \r\n  /*\r\n  state.like = true signifie que le statue est liké\r\n  sate.like = false signifie que le statue n'est pas liké\r\n  */\r\n  \r\n\r\n\r\n  /***************************************FONCTIONS LIKE****************************************************/\r\n  checkLike = data => {\r\n    const userId = isAuthenticate().user._id;\r\n    if(data.likes.likers.includes(userId)){return true}\r\n  };\r\n\r\n  likeToggle = () => {\r\n    const token = isAuthenticate().token;\r\n    const postId = this.props.match.params.postId;\r\n    const userId = isAuthenticate().user._id\r\n    \r\n    if (this.state.like === true){\r\n      this.state.liker.pop();\r\n      this.setState({ like: !this.state.like, \r\n                      liker: this.state.liker,\r\n                      likes: this.state.liker.length\r\n                    });\r\n    }\r\n    else{\r\n      this.state.liker.push(userId);\r\n      this.setState({ like: !this.state.like, \r\n                      liker : this.state.liker,\r\n                      likes: this.state.liker.length\r\n                    });\r\n    }\r\n    likePost(postId, token, userId, this.state.like, this.state.liker.length, this.state.liker )\r\n  };\r\n/***************************************FONCTION COMMENT****************************************************/\r\n  updateComments = comments => {\r\n    this.setState({ comments: comments });\r\n  };\r\n\r\n  /*updateComfirmed = () => {\r\n    let answer = window.confirm(\r\n      'Are you sure you want to delete your comment?'\r\n    );\r\n    if (!answer) { window.location.reload()}\r\n  };*/\r\n\r\n/**********************************************AFFICHAGE****************************************************/\r\n  render() {\r\n    const {\r\n      post,\r\n      postedBy,\r\n      postId,\r\n      date,\r\n      B64photo,\r\n      likes,\r\n      like,\r\n      views,\r\n      redirectToSignin,\r\n      error,\r\n      comments\r\n    } = this.state;\r\n    \r\n    /*setTimeout(() => {redirectToSignin = true}, 7000)\r\n    console.log(redirectToSignin)*/\r\n    let photoUrl = 'data:image/jpg;base64,' + B64photo;\r\n    \r\n    const posterId = postedBy ? postedBy._id : '';\r\n    const posterName = postedBy ? postedBy.pseudo : 'Unknown';\r\n    if (redirectToSignin) return <Redirect to='/signin' />;\r\n    if (error) return <Redirect to='/post/expired' />;\r\n    return (\r\n      <div className='container'>\r\n        {!post.title ? (\r\n          <div className='jumbotron text-center'>\r\n            <h2>Loading...</h2>\r\n          </div>\r\n        ) : (\r\n          <>\r\n            <h2 className='mt-5 mb-5 display-2'>{post.title}</h2>\r\n            <img\r\n              className='card-img-top'\r\n              src = {photoUrl}\r\n              onError={i => (i.target.src = `${DefaultAvatar}`)}\r\n              style={{ width: '30%', height: '15vw', objectFit: 'cover' }}\r\n            />\r\n            <br />\r\n            <br />\r\n\r\n            {!like ? (\r\n              <h3 onClick={this.likeToggle}>\r\n                <i className='fas fa-thumbs-up text-info btn-raised'>\r\n                  {''} {likes} Like\r\n                </i>\r\n              </h3>\r\n            ) : (\r\n              <h3 onClick={this.likeToggle}>\r\n                <i className='fas fa-thumbs-down text-danger btn-raised'>\r\n                  {''} {likes} Unlike\r\n                </i>\r\n              </h3>\r\n            )}\r\n            <p className='card-text'>{post.content}</p>\r\n            <br />\r\n            <p className='font-italic mark'>\r\n              Posted By <Link to={`/user/${posterId}`}>{posterName}</Link> on {new Date(date.uploadDate).toDateString()} at {(new Date(date.uploadDate)).getHours()}:{(new Date(date.uploadDate)).getMinutes()}\r\n            </p>\r\n            <p> Vues: {views.viewsNumber}/{views.viewsLimit}\r\n            </p>\r\n            <Link to={`/`} className='btn btn-primary btn-raised btn-sm mr-5'>\r\n              Back to posts\r\n            </Link>\r\n            {isAuthenticate().user && isAuthenticate().user._id === posterId ? (\r\n              <div className='d-inline-block'>\r\n                <Link\r\n                  //onClick={this.updateComfirmed}\r\n                  className='btn btn-raised btn-success mr-5'\r\n                  to= {`/post/edit/${postId}`}\r\n                  \r\n                >\r\n                  Update Post\r\n                </Link>\r\n                <DeletePost postId={postId} userId={isAuthenticate().user._id}/>\r\n              </div>\r\n            ) : (\r\n              ''\r\n            )}\r\n          </>\r\n        )}\r\n        <Comment\r\n          postId={postId}\r\n          comments={comments}\r\n          updateComments={this.updateComments}\r\n          comments={comments}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SinglePost;\r\n","C:\\Users\\axelj\\Documents\\Cours\\3_eme_annee\\Projet_S9\\main\\PADOL\\client\\src\\post\\NewPost.js",[],"C:\\Users\\axelj\\Documents\\Cours\\3_eme_annee\\Projet_S9\\main\\PADOL\\client\\src\\post\\EditPost.js",[],"C:\\Users\\axelj\\Documents\\Cours\\3_eme_annee\\Projet_S9\\main\\PADOL\\client\\src\\post\\ExpiredPost.js",["145","146","147"],"import React, { Component } from 'react';\r\nimport { isAuthenticate } from '../auth';\r\nimport { Redirect } from 'react-router-dom';\r\nimport DefaultAvatar from '../images/post.jpg';\r\nimport { createPost } from './apiPost';\r\nimport Test from '../images/padol_logo.png';\r\n\r\nclass ExpiredPost extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      user: {},\r\n      redirectToProfile: false,\r\n      error: ''\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({ user: isAuthenticate().user });\r\n  }\r\n\r\n\r\n\r\n\r\n  render() {\r\n    const {\r\n      redirectToProfile,\r\n      user,\r\n      error\r\n    } = this.state;\r\n    if (redirectToProfile) return <Redirect to={`/user/${user._id}`} />;\r\n    return (\r\n      <div className='container'>\r\n        <h2 className='mt-5 mb-5'>This post is not available anymore</h2>\r\n        <div className='card col-md-3 mr-5 mb-5'>\r\n          <h3> Post </h3>\r\n          <img\r\n            className='card-img-top'\r\n            src={Test}\r\n            style={{ width: '100%', height: '10', objectFit: 'cover' }}\r\n            alt='Card image cap'\r\n          />\r\n          <div className='card-body'>\r\n            <h5 className='card-title'>Unreadable</h5>\r\n\r\n          </div>\r\n        </div>\r\n        <div\r\n          className='alert alert-danger'\r\n          style={{ display: error ? '' : 'none' }}\r\n        >\r\n          {error}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ExpiredPost;\r\n","C:\\Users\\axelj\\Documents\\Cours\\3_eme_annee\\Projet_S9\\main\\PADOL\\client\\src\\auth\\index.js",["148"],"import { Redirect } from 'react-router-dom';\r\nexport const signup = user => {\r\n  return fetch(`${process.env.REACT_APP_API_URL}/user/signup`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify(user)\r\n  })\r\n    .then(res => res.json())\r\n}\r\n\r\nexport const signin = user => {\r\n  return fetch(`${process.env.REACT_APP_API_URL}/user/login`, {\r\n    method: 'POST',\r\n    headers: {\r\n      Accept: 'application/json',\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify(user)\r\n  })\r\n    .then(res => res.json())\r\n    .catch(err => console.log(err))\r\n}\r\n\r\nexport const authenticate = (jwt, next) => {\r\n  if (typeof window !== 'undefined') {\r\n    localStorage.setItem('jwt', JSON.stringify(jwt))\r\n    next()\r\n  }\r\n}\r\n\r\nexport const isAuthenticate = () => {\r\n  //localStorage.clear();\r\n  let jwt = localStorage.jwt\r\n  /*let expirationTime = false\r\n  setTimeout( () => {expirationTime = true}, 10000)\r\n  console.log(expirationTime);\r\n  if ( expirationTime) return false//10sec*/\r\n  if (jwt) return JSON.parse(jwt)\r\n  return false \r\n}\r\n\r\nexport const signout = next => {\r\n  if (typeof window !== 'undefined') localStorage.removeItem('jwt')\r\n  document.location.href= `${process.env.REACT_APP_LOCAL_URL}/signin`\r\n  next()\r\n  return fetch(`${process.env.REACT_APP_API_URL}/signout`, { method: 'POST' })\r\n    .then(res => res.json())\r\n    .catch(err => console.log(err))\r\n  \r\n}\r\n\r\n// check path\r\nexport const isActive = (history, path) => {\r\n  if (history.location.pathname === path) return { color: '#ff9900' }\r\n  return {}\r\n}\r\n","C:\\Users\\axelj\\Documents\\Cours\\3_eme_annee\\Projet_S9\\main\\PADOL\\client\\src\\post\\Posts.js",["149"],"import React, { Component } from 'react'\r\nimport { getAllPost} from './apiPost'\r\nimport DefaultAvatar from '../images/avatar.png'\r\nimport { Link } from 'react-router-dom'\r\nimport { isAuthenticate } from '../auth';\r\n\r\nimport {Redirect } from 'react-router-dom';\r\n\r\nclass Posts extends Component {\r\n  constructor () {\r\n    super()\r\n    this.state = {\r\n      posts: [],\r\n      B64photos: {},\r\n      redirectToSignin: false\r\n    }\r\n  }\r\n\r\n  componentDidMount () {\r\n    if (!isAuthenticate()) return this.setState({ redirectToSignin: true });\r\n    getAllPost().then(data => {\r\n      if (data.err) console.log(data.err)\r\n      else this.setState({ posts: data })\r\n    })\r\n  } \r\n\r\n \r\n  renderPost (posts) {\r\n    return (\r\n      <div className='row'>\r\n        {posts.map(post => {\r\n          const posterId = post.postedBy ? post.postedBy._id : ''\r\n          const posterName = post.postedBy ? post.postedBy.pseudo : 'Unknown'\r\n          const infos = post.content\r\n          const date = post.date.uploadDate\r\n          const expiryDate = post.date.expiryDate\r\n          const views = post.views\r\n          const B64photo = post.content.url\r\n          const photoUrl = 'data:image/jpg;base64,' + B64photo;\r\n\r\n\r\n          return (\r\n            <div className='card col-md-3 mr-5 mb-5' key={post._id}>\r\n              <div>\r\n                <Link to={`/user/${posterId}`}>{posterName} </Link>\r\n              </div>\r\n              <img\r\n                className='card-img-top'\r\n                src={photoUrl}\r\n                onError={i => (i.target.src = `${DefaultAvatar}`)}\r\n                style={{ width: '100%', height: '15vw', objectFit: 'cover' }}\r\n              />\r\n              <div className='card-body'>\r\n                <h5 className='card-title'>{infos.title}</h5>\r\n                <p className='card-text'>{infos.caption.substring(0, 50)}</p>\r\n                <br />\r\n                <p className='font-italic mark'>\r\n                  {new Date(date).toDateString()}\r\n                </p>\r\n                <p className='font-italic mark'>\r\n                  Expiration {new Date(expiryDate).toDateString()}\r\n                </p>\r\n                <p className='font-italic mark'>\r\n                  Vues: {views.viewsNumber}/{views.viewsLimit}\r\n                </p>\r\n                <Link\r\n                  to={`/post/${post._id}`}\r\n                  className='btn btn-primary btn-raised btn-sm'\r\n                >\r\n                  Read more\r\n                </Link>\r\n              </div>\r\n            </div>\r\n          )\r\n        })}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  render () {\r\n    if (this.state.redirectToSignin) return <Redirect to='/signin' />;\r\n    const { posts } = this.state\r\n    return (\r\n      <div className='container'>\r\n        {!posts.length || posts.length === 'undefined' ? (\r\n          <div className='jumbotron text-center'>\r\n            <h2>Welcome to Social Network</h2>\r\n          </div>\r\n        ) : (\r\n          <h2 className='mt-5 mb-5'>Recent Posts</h2>\r\n        )}\r\n\r\n        {this.renderPost(posts)}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Posts\r\n","C:\\Users\\axelj\\Documents\\Cours\\3_eme_annee\\Projet_S9\\main\\PADOL\\client\\src\\user\\FollowProfileButton.js",["150","151","152","153","154"],"import React, { Component } from 'react';\r\nimport { inviteFriend } from '../friend/apiFriend';\r\nimport { isAuthenticate } from '../auth';\r\nimport { getAllRequests } from '../friend/apiFriend'\r\nimport { getAllFriends } from '../friend/apiFriend'\r\nimport { deleteFromRequestList } from '../friend/apiFriend'\r\nimport { addFriend } from '../friend/apiFriend'\r\n\r\n\r\nclass FollowProfileButton extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      inviterId: isAuthenticate().user._id,\r\n      token: isAuthenticate().token,\r\n      invitedId: \"this.props\",\r\n      invited: false,\r\n      requests:[],\r\n      friends: [],\r\n      invitationPending: null,\r\n      isyourfriend: false,\r\n      error: ''\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({invitedId: this.props.userId})\r\n    getAllRequests(isAuthenticate().user._id).then(requests => {\r\n      this.setState({requests: requests}, console.log(\"requests vaut \" + JSON.stringify(requests) + JSON.stringify(this.props)));\r\n      requests.forEach(request => (request.userId == this.props.userId) ?\r\n        ( (request.status == false) ? (this.setState({invitationPending: true})) : this.setState({invited: true}))\r\n        :null\r\n\r\n      )\r\n      })\r\n    getAllFriends(isAuthenticate().user._id).then(friends => {\r\n      this.setState({friends: friends}, console.log(\"friends vaut \" + JSON.stringify(friends)));\r\n      friends.forEach(friend => (friend.userId == this.props.userId) ? this.setState({isyourfriend: true}) : null)\r\n      })\r\n  }\r\n\r\n  clickSubmitAdd = e => {\r\n    e.preventDefault();\r\n\r\n      this.setState({ invited: true });\r\n      const { inviterId, token} = this.state;\r\n      const invitedId = this.props.userId\r\n      inviteFriend(inviterId, invitedId, token)\r\n\r\n\r\n  };\r\n\r\n  clickSubmitDelete = e => {\r\n    e.preventDefault();\r\n      this.setState({ invited: false });\r\n      const {inviterId, token} = this.state;\r\n      const invited = this.props.userId;\r\n      deleteFromRequestList( inviterId, invited, token)\r\n  };\r\n\r\n  clickSubmitAccept = e => {\r\n    e.preventDefault();\r\n\r\n      this.setState({ invitationPending: false });\r\n      this.setState({ invited: false });\r\n      this.setState({ isyourfriend: true });\r\n      const { inviterId, token} = this.state;\r\n      const invited = this.props.userId\r\n      deleteFromRequestList(inviterId, invited, token)\r\n      addFriend(inviterId, invited, token)\r\n  };\r\n\r\n  clickSubmitRefuse = e => {\r\n    e.preventDefault();\r\n\r\n      this.setState({ invitationPending: false });\r\n      this.setState({ invited: false });\r\n      this.setState({ isyourfriend: false });\r\n      const { inviterId, token} = this.state;\r\n      const invited = this.props.userId\r\n      deleteFromRequestList(inviterId, invited, token)\r\n  };\r\n\r\n  renderFriend(){\r\n    return (\r\n      <div>\r\n        <button\r\n          className='btn btn-raised btn-primary'\r\n\r\n        >\r\n          Friend\r\n        </button>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  renderPending(){\r\n    return (\r\n      <div>\r\n      <button\r\n        className='btn btn-raised btn-primary'\r\n        onClick={this.clickSubmitAccept}\r\n      >\r\n        Accept\r\n      </button>\r\n      <button\r\n        className='btn btn-raised btn-danger'\r\n        onClick={this.clickSubmitRefuse}\r\n      >\r\n        Refuse\r\n      </button>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  renderInvited(){\r\n    return (\r\n      <button\r\n        className='btn btn-raised btn-warning'\r\n        onClick={this.clickSubmitDelete}\r\n      >\r\n        Cancel invitation\r\n      </button>\r\n    )\r\n  }\r\n\r\n  renderNoFriend(){\r\n    return(\r\n      <button\r\n        className='btn btn-raised btn-primary mr-5'\r\n        onClick={this.clickSubmitAdd}\r\n      >\r\n        Add friend\r\n      </button>\r\n    )\r\n  }\r\n\r\n  render() {\r\n    const {invitedId, invited, invitationPending, isyourfriend} = this.state\r\n    return (\r\n      <div className='d-inline-block'>\r\n      {isAuthenticate().user._id == this.props.userId ? (\r\n        null\r\n      ) : (\r\n        isyourfriend ? (\r\n          this.renderFriend()) :\r\n\r\n        ((invitationPending) ? (\r\n          this.renderPending()\r\n        ) : (\r\n          (invited) ? (\r\n            this.renderInvited()\r\n          ) : (\r\n            this.renderNoFriend()\r\n          )\r\n        )\r\n      ))}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default FollowProfileButton;\r\n","C:\\Users\\axelj\\Documents\\Cours\\3_eme_annee\\Projet_S9\\main\\PADOL\\client\\src\\user\\apiUser.js",[],"C:\\Users\\axelj\\Documents\\Cours\\3_eme_annee\\Projet_S9\\main\\PADOL\\client\\src\\user\\ProfileTabs.js",[],"C:\\Users\\axelj\\Documents\\Cours\\3_eme_annee\\Projet_S9\\main\\PADOL\\client\\src\\user\\DeleteProfile.js",[],"C:\\Users\\axelj\\Documents\\Cours\\3_eme_annee\\Projet_S9\\main\\PADOL\\client\\src\\post\\apiPost.js",["155"],"export const createPost = (userId, token, post) => {\r\n  return fetch(`${process.env.REACT_APP_API_URL}/post/${userId}`, {\r\n    method: 'POST',\r\n    headers: {\r\n      Accept: 'application/json',\r\n      //'Content-Type': 'application/json',\r\n    },\r\n    mode: 'cors',\r\n    body: post\r\n  })\r\n    .then(res => res.json())\r\n    // .catch(err => console.log(err));\r\n}\r\n\r\n\r\nexport const editPost = (postId, token, title, caption) => {\r\n  return fetch(`${process.env.REACT_APP_API_URL}/post/editPost/${postId}`, {\r\n    method: 'PUT',\r\n    body: JSON.stringify(postId),\r\n    headers: {\r\n      Accept: 'application/json',\r\n      'Content-Type': 'application/json',\r\n      Authorization: `Bearer ${token}`\r\n    },\r\n    mode: 'cors',\r\n    body:  JSON.stringify({ postId, title, caption})\r\n  })\r\n    .then(res => res.json())\r\n    .catch(err => console.log(err))\r\n}\r\n\r\nexport const getAllPost = () => {\r\n  return fetch(`${process.env.REACT_APP_API_URL}/post/all`, {\r\n    method: 'GET',\r\n    'Content-Type': 'application/json',\r\n    headers: {\r\n      Accept: 'application/json',\r\n      'Content-Type': 'application/json'\r\n    },\r\n  })\r\n    .then(res => res.json())\r\n    // .catch(err => console.log(err));\r\n}\r\n/*\r\nexport const getBase64PhotoAll = (token) => {\r\n  return fetch(`${process.env.REACT_APP_API_URL}/post/photo/all`, {\r\n    method: 'GET',\r\n    'Content-Type': 'application/json',\r\n    headers: {\r\n      Accept: 'application/json',\r\n      'Content-Type': 'application/json',\r\n      Authorization: `Bearer ${token}`\r\n    }\r\n  })\r\n    .then(res => res.json())\r\n    .catch(err => console.log(err))\r\n}*/\r\n\r\n\r\n\r\nexport const getPost = (postId, token) => {\r\n  return fetch(`${process.env.REACT_APP_API_URL}/post/${postId}`, {\r\n    method: 'GET',\r\n    'Content-Type': 'application/json',\r\n    headers: {\r\n      Accept: 'application/json',\r\n      'Content-Type': 'application/json',\r\n      Authorization: `Bearer ${token}`\r\n    }\r\n  })\r\n    .then(res => res.json())\r\n    .catch(err => console.log(err))\r\n}\r\n\r\nexport const getBase64Photo = (postId, token) => {\r\n  return fetch(`${process.env.REACT_APP_API_URL}/post/photo/${postId}`, {\r\n    method: 'GET',\r\n    'Content-Type': 'application/json',\r\n    headers: {\r\n      Accept: 'application/json',\r\n      'Content-Type': 'application/json',\r\n      Authorization: `Bearer ${token}`\r\n    }\r\n  })\r\n    .then(res => res.json())\r\n    .catch(err => console.log(err))\r\n}\r\n\r\nexport const getPhotoPost = (postId, token) => {\r\n  return fetch(`${process.env.REACT_APP_API_URL}/post/photo/${postId}`, {\r\n    method: 'GET',\r\n    'Content-Type': 'application/json',\r\n    headers: {\r\n      Accept: 'application/json',\r\n      'Content-Type': 'application/json',\r\n      Authorization: `Bearer ${token}`\r\n    }\r\n  })\r\n    .then(res => res.json())\r\n    .catch(err => console.log(err))\r\n}\r\n\r\n\r\nexport const getPostByUser = (userId, token) => {\r\n  return fetch(`${process.env.REACT_APP_API_URL}/post/by/${userId}`, {\r\n    method: 'GET',\r\n    headers: {\r\n      Accept: 'application/json',\r\n      Authorization: `Bearer ${token}`\r\n    }\r\n  })\r\n    .then(res => res.json())\r\n    .catch(err => console.log(err))\r\n}\r\n\r\nexport const removePost = (postId, token, userId) => {\r\n  return fetch(`${process.env.REACT_APP_API_URL}/post/delete`, {\r\n    method: 'PUT',\r\n    headers: {\r\n      Accept: 'application/json',\r\n      'Content-Type': 'application/json',\r\n      Authorization: `Bearer ${token}`\r\n    },\r\n    body: JSON.stringify({postId})\r\n  })\r\n    .then(res => res.json())\r\n    .catch(err => console.log(err))\r\n}\r\n\r\nexport const likePost = (postId, token, userId, status, numberOfLikes, LikersId) => {\r\n  return fetch(`${process.env.REACT_APP_API_URL}/post/like/${postId}`, {\r\n    method: 'PUT',\r\n    headers: {\r\n      Accept: 'application/json',\r\n      'Content-Type': 'application/json',\r\n      Authorization: `Bearer ${token}`\r\n    },\r\n    body: JSON.stringify({ userId, postId, status, numberOfLikes, LikersId })\r\n  })\r\n    .then(res => res.json())\r\n    .catch(err => console.log(err))\r\n}\r\n\r\nexport const newComment = (postId, token, userId, pseudo, comment) => {\r\n  return fetch(`${process.env.REACT_APP_API_URL}/post/comment`, {\r\n    method: 'PUT',\r\n    headers: {\r\n      Accept: 'application/json',\r\n      'Content-Type': 'application/json',\r\n      Authorization: `Bearer ${token}`\r\n    },\r\n    body: JSON.stringify({ userId, postId, pseudo, comment })\r\n  })\r\n    .then(res => res.json())\r\n    .catch(err => console.log(err))\r\n}\r\n\r\nexport const deleteComment = (postId, token, userId, commentId, comment) => {\r\n  return fetch(`${process.env.REACT_APP_API_URL}/post/deletecomment`, {\r\n    method: 'PUT',\r\n    headers: {\r\n      Accept: 'application/json',\r\n      'Content-Type': 'application/json',\r\n      Authorization: `Bearer ${token}`\r\n    },\r\n    body: JSON.stringify({ userId, postId, commentId, comment })\r\n  })\r\n    .then(res => res.json(res))\r\n    .catch(err => console.log(err))\r\n}\r\n","C:\\Users\\axelj\\Documents\\Cours\\3_eme_annee\\Projet_S9\\main\\PADOL\\client\\src\\post\\Comment.js",[],"C:\\Users\\axelj\\Documents\\Cours\\3_eme_annee\\Projet_S9\\main\\PADOL\\client\\src\\post\\DeletePost.js",[],"C:\\Users\\axelj\\Documents\\Cours\\3_eme_annee\\Projet_S9\\main\\PADOL\\client\\src\\post\\DeleteComment.js",[],"C:\\Users\\axelj\\Documents\\Cours\\3_eme_annee\\Projet_S9\\main\\PADOL\\client\\src\\friend\\Friends.js",["156","157","158","159","160","161"],"import React, { Component } from 'react';\r\nimport { isAuthenticate } from '../auth';\r\nimport { Redirect } from 'react-router-dom';\r\nimport DefaultAvatar from '../images/post.jpg';\r\nimport { getAllRequests } from './apiFriend'\r\nimport { addFriend } from './apiFriend'\r\nimport { getAllFriends } from './apiFriend'\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport Test from '../images/padol_logo.png';\r\n\r\nclass Friends extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      user: {},\r\n      redirectToProfile: false,\r\n      token: isAuthenticate().token,\r\n      //friends: [{ userId:\"Nico\"}, { userId:\"Vic\"}, {userId:\"Loulou\"}, {userId:\"Dimi\"}],\r\n      requests: [{userId: \"Toto\", status:false, date: new Date(Date.now())},\r\n                {userId: \"Boubou\", status:true, date: new Date(Date.now())},\r\n                {userId: \"Rami\", status:false, date: new Date(Date.now())}\r\n                      ],\r\n      test: [],\r\n      friends: [],\r\n      error: ''\r\n    };\r\n  }\r\n\r\n\r\n  componentDidMount() {\r\n    this.setState({ user: isAuthenticate().user });\r\n    getAllRequests(isAuthenticate().user._id).then(requests => {\r\n      this.setState({test: requests}, console.log(\"requests vaut \" + JSON.stringify(requests)));\r\n      })\r\n    getAllFriends(isAuthenticate().user._id).then(friends => {\r\n      this.setState({friends: friends}, console.log(\"friends vaut \" + JSON.stringify(friends)));\r\n      })\r\n  }\r\n\r\n  renderFriends(friends){\r\n    return(\r\n      <div className='row'>\r\n        {friends.map(friend => {\r\n          return (\r\n            <div className='card col-md-3 mr-5 mb-5' key={friend.userId}>\r\n              <img\r\n                style={{ height: 'auto', width: '30vw' }}\r\n                className='img-thumbnail'\r\n                src={`${process.env.REACT_APP_API_URL}/user/photo/${friend.userId}`}\r\n                onError={i => (i.target.src = `${DefaultAvatar}`)}\r\n                alt={friend.userId}\r\n              />\r\n              <div className='card-body'>\r\n                <h5 className='card-title'>{friend.userId}</h5>\r\n                <Link\r\n                  to={`/user/${friend.userId}`}\r\n                  className='btn btn-raised btn-primary btn-sm'\r\n                >\r\n                  View Profile\r\n                </Link>\r\n              </div>\r\n            </div>\r\n          )\r\n        }\r\n\r\n        )}\r\n      </div>\r\n    )\r\n\r\n  }\r\n\r\n  renderRequests(requests){\r\n    console.log(JSON.stringify(requests))\r\n    return(\r\n      <div className='row'>\r\n        {requests.map(request => {\r\n          return (\r\n            request.status === false ? (\r\n              <div className='card col-md-3 mr-5 mb-5' key={request.userId}>\r\n              <img\r\n                style={{ height: 'auto', width: '30vw' }}\r\n                className='img-thumbnail'\r\n                src={`${process.env.REACT_APP_API_URL}/user/photo/${request.userId}`}\r\n                onError={i => (i.target.src = `${DefaultAvatar}`)}\r\n                alt={request.userId}\r\n              />\r\n                <div className='card-body'>\r\n                  <h5 className='card-title'>{request.userId}</h5>\r\n                  <Link\r\n                    to={`/user/${request.userId}`}\r\n                    className='btn btn-raised btn-primary btn-sm'\r\n                  >\r\n                    View Profile\r\n                  </Link>\r\n                </div>\r\n\r\n              </div>\r\n            ) : (null)\r\n          )\r\n        }\r\n        )}\r\n      </div>\r\n    )\r\n\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      redirectToProfile,\r\n      user,\r\n      friends,\r\n      requests,\r\n      test,\r\n      error\r\n    } = this.state;\r\n    return (\r\n      <div className='container'>\r\n        {!friends.length || friends.length === 'undefined' ? (\r\n          <div className='jumbotron text-center'>\r\n            <h2>No friends</h2>\r\n          </div>\r\n        ) : (\r\n          <h2 className='mt-5 mb-5'>Friends</h2>\r\n        )}\r\n\r\n        {this.renderFriends(friends)}\r\n        {!requests.length || requests.length === 'undefined' ? (\r\n          <div className='jumbotron text-center'>\r\n            <h2>No requests</h2>\r\n          </div>\r\n        ) : (\r\n          <h2 className='mt-5 mb-5'>Requests</h2>\r\n        )}\r\n\r\n        {this.renderRequests(test)}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Friends;\r\n","C:\\Users\\axelj\\Documents\\Cours\\3_eme_annee\\Projet_S9\\main\\PADOL\\client\\src\\friend\\apiFriend.js",[],{"ruleId":"162","replacedBy":"163"},{"ruleId":"164","replacedBy":"165"},{"ruleId":"166","severity":1,"message":"167","line":92,"column":13,"nodeType":"168","endLine":99,"endColumn":14},{"ruleId":"169","severity":1,"message":"170","line":2,"column":10,"nodeType":"171","messageId":"172","endLine":2,"endColumn":20},{"ruleId":"169","severity":1,"message":"173","line":3,"column":8,"nodeType":"171","messageId":"172","endLine":3,"endColumn":22},{"ruleId":"169","severity":1,"message":"174","line":25,"column":11,"nodeType":"171","messageId":"172","endLine":25,"endColumn":17},{"ruleId":"169","severity":1,"message":"175","line":26,"column":11,"nodeType":"171","messageId":"172","endLine":26,"endColumn":16},{"ruleId":"176","severity":1,"message":"177","line":32,"column":7,"nodeType":"178","messageId":"179","endLine":32,"endColumn":8},{"ruleId":"169","severity":1,"message":"180","line":73,"column":12,"nodeType":"171","messageId":"172","endLine":73,"endColumn":16},{"ruleId":"169","severity":1,"message":"181","line":73,"column":18,"nodeType":"171","messageId":"172","endLine":73,"endColumn":31},{"ruleId":"182","severity":1,"message":"183","line":75,"column":39,"nodeType":"171","messageId":"184","endLine":75,"endColumn":44},{"ruleId":"169","severity":1,"message":"185","line":45,"column":19,"nodeType":"171","messageId":"172","endLine":45,"endColumn":23},{"ruleId":"169","severity":1,"message":"186","line":45,"column":25,"nodeType":"171","messageId":"172","endLine":45,"endColumn":30},{"ruleId":"169","severity":1,"message":"187","line":45,"column":32,"nodeType":"171","messageId":"172","endLine":45,"endColumn":40},{"ruleId":"188","severity":1,"message":"189","line":63,"column":27,"nodeType":"190","messageId":"191","endLine":63,"endColumn":28,"suggestions":"192"},{"ruleId":"188","severity":1,"message":"189","line":63,"column":52,"nodeType":"190","messageId":"191","endLine":63,"endColumn":53,"suggestions":"193"},{"ruleId":"169","severity":1,"message":"194","line":1,"column":17,"nodeType":"171","messageId":"172","endLine":1,"endColumn":26},{"ruleId":"195","severity":1,"message":"196","line":143,"column":13,"nodeType":"168","endLine":148,"endColumn":15},{"ruleId":"197","severity":1,"message":"198","line":196,"column":11,"nodeType":"199","endLine":196,"endColumn":30},{"ruleId":"169","severity":1,"message":"200","line":4,"column":8,"nodeType":"171","messageId":"172","endLine":4,"endColumn":21},{"ruleId":"169","severity":1,"message":"201","line":5,"column":10,"nodeType":"171","messageId":"172","endLine":5,"endColumn":20},{"ruleId":"202","severity":1,"message":"203","line":37,"column":11,"nodeType":"168","endLine":42,"endColumn":13},{"ruleId":"169","severity":1,"message":"204","line":1,"column":10,"nodeType":"171","messageId":"172","endLine":1,"endColumn":18},{"ruleId":"195","severity":1,"message":"196","line":47,"column":15,"nodeType":"168","endLine":52,"endColumn":17},{"ruleId":"205","severity":1,"message":"206","line":30,"column":51,"nodeType":"207","messageId":"208","endLine":30,"endColumn":53},{"ruleId":"205","severity":1,"message":"206","line":31,"column":27,"nodeType":"207","messageId":"208","endLine":31,"endColumn":29},{"ruleId":"205","severity":1,"message":"206","line":38,"column":48,"nodeType":"207","messageId":"208","endLine":38,"endColumn":50},{"ruleId":"169","severity":1,"message":"209","line":139,"column":12,"nodeType":"171","messageId":"172","endLine":139,"endColumn":21},{"ruleId":"205","severity":1,"message":"206","line":142,"column":34,"nodeType":"207","messageId":"208","endLine":142,"endColumn":36},{"ruleId":"210","severity":1,"message":"211","line":26,"column":5,"nodeType":"212","messageId":"208","endLine":26,"endColumn":9},{"ruleId":"169","severity":1,"message":"204","line":3,"column":10,"nodeType":"171","messageId":"172","endLine":3,"endColumn":18},{"ruleId":"169","severity":1,"message":"213","line":6,"column":10,"nodeType":"171","messageId":"172","endLine":6,"endColumn":19},{"ruleId":"169","severity":1,"message":"214","line":10,"column":8,"nodeType":"171","messageId":"172","endLine":10,"endColumn":12},{"ruleId":"169","severity":1,"message":"215","line":110,"column":7,"nodeType":"171","messageId":"172","endLine":110,"endColumn":24},{"ruleId":"169","severity":1,"message":"216","line":111,"column":7,"nodeType":"171","messageId":"172","endLine":111,"endColumn":11},{"ruleId":"169","severity":1,"message":"217","line":115,"column":7,"nodeType":"171","messageId":"172","endLine":115,"endColumn":12},"no-native-reassign",["218"],"no-negated-in-lhs",["219"],"jsx-a11y/anchor-is-valid","The href attribute is required for an anchor to be keyboard accessible. Provide a valid, navigable address as the href value. If you cannot provide an href, but still need the element to resemble a link, use a button and change it with appropriate styles. Learn more: https://github.com/evcohen/eslint-plugin-jsx-a11y/blob/master/docs/rules/anchor-is-valid.md","JSXOpeningElement","no-unused-vars","'findPeople' is defined but never used.","Identifier","unusedVar","'DefaultProfile' is defined but never used.","'userId' is assigned a value but never used.","'token' is assigned a value but never used.","no-sequences","Unexpected use of comma operator.","SequenceExpression","unexpectedCommaExpression","'open' is assigned a value but never used.","'followMessage' is assigned a value but never used.","no-redeclare","'users' is already defined.","redeclared","'name' is assigned a value but never used.","'email' is assigned a value but never used.","'password' is assigned a value but never used.","no-useless-escape","Unnecessary escape character: \\[.","Literal","unnecessaryEscape",["220","221"],["222","223"],"'Component' is defined but never used.","jsx-a11y/alt-text","img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","react/jsx-no-duplicate-props","No duplicate props allowed","JSXAttribute","'DefaultAvatar' is defined but never used.","'createPost' is defined but never used.","jsx-a11y/img-redundant-alt","Redundant alt attribute. Screen-readers already announce `img` tags as an image. You don’t need to use the words `image`, `photo,` or `picture` (or any specified custom words) in the alt prop.","'Redirect' is defined but never used.","eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","unexpected","'invitedId' is assigned a value but never used.","no-dupe-keys","Duplicate key 'body'.","ObjectExpression","'addFriend' is defined but never used.","'Test' is defined but never used.","'redirectToProfile' is assigned a value but never used.","'user' is assigned a value but never used.","'error' is assigned a value but never used.","no-global-assign","no-unsafe-negation",{"messageId":"224","fix":"225","desc":"226"},{"messageId":"227","fix":"228","desc":"229"},{"messageId":"224","fix":"230","desc":"226"},{"messageId":"227","fix":"231","desc":"229"},"removeEscape",{"range":"232","text":"233"},"Remove the `\\`. This maintains the current functionality.","escapeBackslash",{"range":"234","text":"235"},"Replace the `\\` with `\\\\` to include the actual backslash character.",{"range":"236","text":"233"},{"range":"237","text":"235"},[1862,1863],"",[1862,1862],"\\",[1887,1888],[1887,1887]]
